<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creator Micro Mapper</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="app-header">
        <h1>Creator Micro Mapper</h1>
        <p>
          Build key, shortcut, and macro profiles for a Work Louder Creator
          Micro keyboard using VIA-style keycodes.
        </p>
      </header>

      <section class="panel controls-panel">
        <h2>Profile</h2>
        <div class="field-group">
          <label for="profileName">Profile Name</label>
          <input id="profileName" type="text" placeholder="My Creator Micro Profile" />
        </div>

        <div class="field-row">
          <div class="field-group">
            <label for="layerSelect">Layer</label>
            <select id="layerSelect"></select>
          </div>
          <div class="field-group">
            <label for="keyCount">Key Count</label>
            <input id="keyCount" type="number" min="1" max="64" />
          </div>
        </div>

        <div class="button-row">
          <button id="saveLocalButton" type="button">Save Local</button>
          <button id="loadLocalButton" type="button">Load Local</button>
          <button id="resetButton" type="button" class="danger">Reset</button>
        </div>

        <div class="button-row">
          <button id="exportButton" type="button">Export JSON</button>
          <label class="file-label" for="importInput">Import JSON</label>
          <input id="importInput" type="file" accept="application/json" />
        </div>

        <p id="statusMessage" class="status"></p>
      </section>

      <section class="panel layout-panel">
        <h2>Keyboard Layout</h2>
        <p class="hint">Select a key to edit its action.</p>
        <div id="keyGrid" class="key-grid"></div>
      </section>

      <section class="panel editor-panel">
        <h2>Key Editor</h2>
        <p id="selectedKeyLabel">No key selected.</p>

        <div class="field-group">
          <label for="actionType">Action Type</label>
          <select id="actionType">
            <option value="keycode">Keycode</option>
            <option value="shortcut">Shortcut</option>
            <option value="macro">Macro</option>
          </select>
        </div>

        <div id="keycodeFields" class="editor-section">
          <div class="field-group">
            <label for="keycodeInput">VIA/QMK Keycode</label>
            <input
              id="keycodeInput"
              type="text"
              placeholder="KC_A"
              list="commonKeycodes"
            />
          </div>
        </div>

        <div id="shortcutFields" class="editor-section hidden">
          <p class="hint">Generate a wrapped keycode such as LCTL(LSFT(KC_S)).</p>
          <div class="checkbox-row">
            <label><input type="checkbox" value="LCTL" class="modifier" />Ctrl</label>
            <label><input type="checkbox" value="LSFT" class="modifier" />Shift</label>
            <label><input type="checkbox" value="LALT" class="modifier" />Alt</label>
            <label><input type="checkbox" value="LGUI" class="modifier" />Gui</label>
          </div>
          <div class="field-group">
            <label for="shortcutKeyInput">Base Keycode</label>
            <input
              id="shortcutKeyInput"
              type="text"
              placeholder="KC_C"
              list="commonKeycodes"
            />
          </div>
          <div class="field-group">
            <label for="shortcutPreview">Generated Shortcut</label>
            <input id="shortcutPreview" type="text" readonly />
          </div>
        </div>

        <div id="macroFields" class="editor-section hidden">
          <div class="field-group">
            <label for="macroSelect">Macro</label>
            <select id="macroSelect"></select>
          </div>
        </div>
      </section>

      <section class="panel macro-panel">
        <h2>Macros</h2>
        <div id="macroList" class="macro-list"></div>
        <button id="addMacroButton" type="button">Add Macro</button>
      </section>

      <section class="panel output-panel">
        <h2>Export Preview</h2>
        <p class="hint">
          This JSON captures your key assignments and macros for later import.
        </p>
        <textarea id="jsonPreview" readonly></textarea>
      </section>
    </main>

    <datalist id="commonKeycodes">
      <option value="KC_NO"></option>
      <option value="KC_TRNS"></option>
      <option value="KC_A"></option>
      <option value="KC_B"></option>
      <option value="KC_C"></option>
      <option value="KC_D"></option>
      <option value="KC_E"></option>
      <option value="KC_F"></option>
      <option value="KC_G"></option>
      <option value="KC_H"></option>
      <option value="KC_I"></option>
      <option value="KC_J"></option>
      <option value="KC_K"></option>
      <option value="KC_L"></option>
      <option value="KC_M"></option>
      <option value="KC_N"></option>
      <option value="KC_O"></option>
      <option value="KC_P"></option>
      <option value="KC_Q"></option>
      <option value="KC_R"></option>
      <option value="KC_S"></option>
      <option value="KC_T"></option>
      <option value="KC_U"></option>
      <option value="KC_V"></option>
      <option value="KC_W"></option>
      <option value="KC_X"></option>
      <option value="KC_Y"></option>
      <option value="KC_Z"></option>
      <option value="KC_1"></option>
      <option value="KC_2"></option>
      <option value="KC_3"></option>
      <option value="KC_4"></option>
      <option value="KC_5"></option>
      <option value="KC_6"></option>
      <option value="KC_7"></option>
      <option value="KC_8"></option>
      <option value="KC_9"></option>
      <option value="KC_0"></option>
      <option value="KC_ENT"></option>
      <option value="KC_ESC"></option>
      <option value="KC_TAB"></option>
      <option value="KC_SPC"></option>
      <option value="KC_BSPC"></option>
      <option value="KC_DEL"></option>
      <option value="KC_MUTE"></option>
      <option value="KC_VOLU"></option>
      <option value="KC_VOLD"></option>
      <option value="KC_MPLY"></option>
      <option value="KC_MNXT"></option>
      <option value="KC_MPRV"></option>
    </datalist>

    <script src="./app.js"></script>
  </body>
</html>
